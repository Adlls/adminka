<div class="admin_container">

    <div class="admin_top">
        <div class="header_admin clearfix">
            <h2>Welcome {{name}}!</h2>
            <p>{{role}}</p>
        </div>

        <div class="btn_logout_admin clearfix">
            <a href="/auth/logout/" class="btn_logout">Выйти</a>
        </div>
    </div>

    <div class="admin_middle">
        <div class="admin_options">
            <ul>
                <form id="getUsers">
                        <li>
                             <input type="hidden" name="getAll" value=true />
                            <button type="submit">view users</button>
                       </li>

                        <li>
                            <input type="hidden" name="addUser" value=true />
                            <button type="submit">add user</button>
                        </li>

                   <!-- <li><a href="http://localhost:3000/admin?getUsers=true">Показать юзеров</a></li> -->
                </form>
            </ul>
        </div>

        <div class="admin_content">
            {{#if users}}
                <table>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Login</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th>Role</th>
                        {{#each users}}
                            <tr>
                                <td>{{this._id}}</td>
                                <td>{{this.name}}</td>
                                <td>{{this.login}}</td>
                                <td>{{this.email}}</td>
                                <td>{{this.phone}}</td>
                                <td>{{this.role}}</td>
                            </tr>
                        {{/each}}

                </table>
            {{/if}}
        </div>
    </div>
</div>

<script>
/*
    document.getElementById("getUsers").addEventListener("click", function (e) {
        e.preventDefault();
        // получаем данные формы
        let registerForm = document.forms["getUser"];
        let userName = registerForm.elements["userName"].value;
        let userAge = registerForm.elements["userAge"].value;
        // сериализуем данные в json
        let user = JSON.stringify({userName: userName, userAge: userAge});
        let request = new XMLHttpRequest();
        // посылаем запрос на адрес
        request.open("GET", "/user", true);
        request.setRequestHeader("Content-Type", "application/json");
        request.addEventListener("load", function () {
            let receivedUser = JSON.parse(request.response);
            console.log(receivedUser.userName, "-", receivedUser.userAge);   // смотрим ответ сервера
        });
        request.send(user);
    });
    */
</script>